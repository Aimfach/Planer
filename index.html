<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Planer</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>

<h1>Corona-Planer</h1>
<h2 id = "dateDiv">Datum</h2>
<script>
    const d = new Date();
    document.getElementById("dateDiv").innerHTML = d.getDate() + "." + d.getMonth() + "." + d.getFullYear();
    //todo wochentag einf√ºgen
</script>

<h2>uhrzeit</h2>
<h2>angemeldet</h2>

<table id="covidTable">
    <tr>
        <th></th>
        <th></th>
        <th>Anwesendheit</th>
        <th>Covid-Status</th>
    </tr>
</table>
<!--

  <script>
    let tbodyRef = document.getElementById('covidTable').getElementsByTagName('tbody')[0];


    function addStudent(student){
        let tName = student[0]               //name of the student
        let bPresent = student[1]              //present or not
        let bCovidStatus = student[2]            //covidstatus


        let newRow = tbodyRef.insertRow();

        let emptyCell = newRow.insertCell();
        let name = newRow.insertCell();
        let present = newRow.insertCell();
        let covidStatus = newRow.insertCell();

        let nameText = document.createTextNode(tName);
        let presentText = document.createTextNode(bPresent);
        let covidStatusText = document.createTextNode(bCovidStatus);

        name.appendChild(nameText);
        present.appendChild(presentText);
        covidStatus.appendChild(covidStatusText);
    }

    function addClass(classOverview){
        let className = classOverview[0]
        let classObject = classOverview[1]

        let newRow = tbodyRef.insertRow();
        let emptyCell = newRow.insertCell();
        let nameText = document.createTextNode(className);

        emptyCell.appendChild(nameText);

        for (let i = 0; i < classObject.length; i++) {
            addStudent(classObject[i])
        }

    }

function convertIntoClass(data){


    let classList = []


    for (let i = 0; i < data.length; i++) {
        if (!isInArray(data[i]["Klasse"], classList))
            classList[classList.length] = (data[i]["Klasse"])


        classList[whereInArray(data[i]["Klasse"], classList)] = ["5"]
        classList[whereInArray(data[i]["Klasse"], classList)] = [
                data[i]["Vorname"] + " " + data[i]["Nachname"],
                getPresent(data[i]),
                getCovidStatus(data[i])
            ]
        console.log(classList)
    }

    console.log(classList)
    return classList
}

function getCovidStatus(data){
    if (!data["test_erforderlich"] === true){
        return "&#9745;"
    } else{
        return "x"
    }
}

function getPresent(data) {
    if (data["anwesend"] === true){
       return "&#9745;"
    } if (data["entschuldigt"] === true){
        return "/"
    } else{
        return "x"
    }
}

function isInArray(string, array){
    let inArray
    for (let i = 0; i < array.length; i++) {
        if (string === array[i])
            inArray = true
    }
    return inArray
}

function whereInArray(string, array){
    let whereInArray
    for (let i = 0; i < array.length; i++) {
        if (string === array[i])
            whereInArray = i
    }
    return whereInArray
}



    let classFive = [
        ["5s"],
        [
            ["Selina", "ja", "ja"],
            ["julia", "ja", "ja"],
            ["laura", "nein", "ja"],
            ["johannes", "ja", "ja"],
            ["windbeutel", "ja", "nein"]]
    ]

    let classSix = [
        ["6s"],
        [
            ["Selina", "ja", "ja"],
            ["julia", "ja", "ja"],
            ["laura", "nein", "ja"],
            ["johannes", "ja", "ja"],
            ["windbeutel", "ja", "nein"]]
    ]

    let data  = [{
        "id": 0,
        "Vorname": "Jasmin",
        "Nachname": "Peter",
        "Klasse": "5",
        "anwesend": true,
        "entschuldigt": true,
        "test_erforderlich": false,
    }]

    for (let i = 0; i < convertIntoClass(data).length; i++) {
        addClass(convertIntoClass(data))
    }


    addClass(classFive)
    addClass(classSix)




    //todo create students from

</script>

-->

<script>
    let result = {
        "id": 0,
        "Vorname": "Jasmin",
        "Nachname": "Peter",
        "Klasse": "5",
        "anwesend": true,
        "entschuldigt": true,
        "test_erforderlich": false
    };

    var data = [];

    for(var i in result)
        data.push([i, result [i]]);


    console.log(length.data)
    for (let i = 0; i < length.data; i++){
       const div = document.createElement('div');
       div.innerHTML = data[i]["Vorname"];
       div.innerHTML += data[i]["Nachname"];
       div.innerHTML += data[i]["Klasse"];
       div.innerHTML += data[i]["entschuldigt"];
       div.innerHTML += data[i]["test_erforderlich"];
    }
</script>
</body>
</html>
